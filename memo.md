# 流れ?

## 言いたいこと
API キャッシュをするかしないかを、コードを書く前ではなく、後から決められるようになった。

ある程度作ってみてから、遅いところだけキャッシュをするという戦略が取れる。最初でやると、どこが遅くなりそうかという予測が必要で、調査のための時間とか経験が必要になる。けど、動かしながらやっていけるなら、時間とか経験があまり必要がなくなる。

要するに、アプリにとって重要な価値の部分の設計に集中できるようになるってこと。

例えば、認証を外部サービス認証を使うか、独自の認証データベースを持つかとか、そういうのはそれほどアプリの価値には関係ないけど、最初に決めないと組み始められないとか。とすると、どちらがいいかを調査する時間が必要になるし、人が増えるとどっちがいいかで揉める。どちらにせよ時間を失うので、アプリの価値にとても重要な部分の開発時間を削られてしまう。

今回紹介した方法で何でも後回しにできるわけじゃないけど、後回しの手段をたくさん覚えると、アプリの価値の核心に集中できるようになるのでおすすめ。というか、私もそれを目指している一人です。


## 流れ
1. 今回、デザインパターンの形じゃなくてメリットを覚えて欲しいというのを宣言する
2. サンプルコードの解説
3. これから、キャッシュを組み込むと宣言する
4. どういう修正をするかを一つ一つ取り上げて、問題点を解説する
5. decorator パターンを使ってみる
6. メリットを解説する
    * 使う側がぱちぱちできる
    * すぐに元に戻せる
    * 単体テストがやりやすい
    * ログがいい例かな?
7. どこで使えるのかの話
    * キャッシュ
    * トランザクション
    * ログ (監査のために、一時的にメールを飛ばすとか)
    * その場しのぎのバグ修正や脆弱性の対策
8. 後回しにできるんです!
9. ハンズオンでは、ここまでやります
    * 興味がある人は一緒にやりましょう!
    * わかったわ! って人は、課題があるので試してみましょう
10. 課題 (顧客ごとに、組み合わせを変える)
11. AOP
    * 今回紹介した、API キャッシュとかは似たような decorator を量産することになる
    * AOP を使うと、こういうコードを自動で生成するのでおすすめ
    * 詳しく知りたい人は懇親会で?